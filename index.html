<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Security Learning Module</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #00ACC1;
            --secondary: #4DD0E1;
            --accent: #80DEEA;
            --blue1: #B2EBF2;
            --blue2: #E0F7FA;
            --blue3: #F3FBFC;
            --text-main: #00323d;
            --text-secondary: #006978;
            --bg-gradient: linear-gradient(135deg, var(--primary) 0%, var(--blue2) 100%);
            --section-bg: rgba(255,255,255,0.98);
            --header-bg: rgba(255,255,255,0.85);
            --footer-bg: linear-gradient(135deg, var(--primary) 0%, var(--blue2) 100%);
            --nav-bg: rgba(255,255,255,0.95);
            --nav-btn-bg: linear-gradient(90deg, var(--primary), var(--secondary));
            --nav-btn-active-bg: linear-gradient(90deg, var(--secondary), var(--accent));
            --transition: all 0.3s cubic-bezier(.4,2,.6,1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        }
        [data-theme="dark"] {
            --primary: #00ACC1;
            --secondary: #4DD0E1;
            --accent: #80DEEA;
            --blue1: #00323d;
            --blue2: #006978;
            --blue3: #222f3e;
            --text-main: #E0F7FA;
            --text-secondary: #B2EBF2;
            --bg-gradient: linear-gradient(135deg, #00323d 0%, #006978 100%);
            --section-bg: rgba(0, 50, 61, 0.98);
            --header-bg: rgba(0, 50, 61, 0.85);
            --footer-bg: linear-gradient(135deg, #00323d 0%, #006978 100%);
            --nav-bg: rgba(0, 50, 61, 0.95);
            --nav-btn-bg: linear-gradient(90deg, #00323d, #4DD0E1);
            --nav-btn-active-bg: linear-gradient(90deg, #4DD0E1, #00323d);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-main);
            background: var(--bg-gradient);
            min-height: 100vh;
            font-size: 16px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: clamp(10px, 3vw, 20px);
        }

        .header {
            text-align: center;
            color: var(--text-main);
            margin-bottom: 30px;
            padding: clamp(2rem, 5vw, 3rem) clamp(1rem, 4vw, 2rem);
            background: var(--header-bg);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            position: relative;
        }
        .header::before {
            content: "";
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at top right, rgba(255,255,255,0.2) 0%, transparent 40%);
            pointer-events: none;
            border-radius: 20px;
        }
        .header h1 {
            font-size: clamp(1.8em, 5vw, 2.5em);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            padding-top: 20px; 
        }
         .header p {
            font-size: clamp(1em, 2.5vw, 1.2em);
            opacity: 0.9;
            max-width: 700px;
            margin: 5px auto;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        .toggle-switch {
            width: 56px; height: 28px; background: var(--blue1); border-radius: 20px;
            position: relative; cursor: pointer; transition: background 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .toggle-slider {
            position: absolute; top: 3px; left: 3px; width: 22px; height: 22px;
            background: white; border-radius: 50%; transition: left 0.3s cubic-bezier(.4,2,.6,1), background 0.3s;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.1em; color: var(--primary); overflow: hidden;
            box-shadow: 0 1px 4px rgba(0,0,0,0.10);
        }
        .toggle-slider .icon-sun, .toggle-slider .icon-moon { position: absolute; opacity: 0; transition: opacity 0.3s; }
        .toggle-switch:not(.dark) .icon-sun { opacity: 1; color: #FFD700; }
        .toggle-switch.dark .icon-moon { opacity: 1; color: var(--primary); }
        .toggle-switch.dark { background: var(--primary); }
        .toggle-switch.dark .toggle-slider { left: 31px; background: var(--blue3); }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--blue1);
            border-radius: 4px;
            margin: 25px 0 0;
            overflow: hidden;
        }
        [data-theme="dark"] .progress-bar { background: rgba(255,255,255,0.1); }
        .progress-fill {
            height: 100%;
            background: var(--nav-btn-bg);
            width: 0%;
            transition: width 0.4s ease-out;
        }

        .download-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white; border: none; padding: 15px clamp(20px, 4vw, 30px); border-radius: 50px;
            font-size: clamp(0.9em, 2vw, 1em); font-weight: bold; cursor: pointer; margin: 5px;
            transition: var(--transition); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: inline-flex; align-items: center; gap: 10px;
            text-decoration: none;
        }
        .download-btn:hover {
            transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .download-buttons {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 25px;
        }
        
        .navigation {
            background: var(--nav-bg); backdrop-filter: blur(10px); border-radius: 50px;
            padding: 15px; margin-bottom: 30px; display: flex; justify-content: center;
            flex-wrap: wrap; gap: 10px; position: sticky; top: 10px; z-index: 100;
        }
        .nav-buttons {
            display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
        }
        .nav-btn {
            background: var(--nav-btn-bg); color: white; border: none; padding: 12px 20px;
            border-radius: 25px; cursor: pointer; transition: var(--transition); font-weight: 500;
            display: flex; align-items: center; gap: 8px;
        }
        .nav-btn:hover, .nav-btn.active {
            background: var(--nav-btn-active-bg); transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
        }
        .nav-dropdown-container { display: none; width: 100%; padding: 0 10px; }
        .nav-dropdown {
            width: 100%; padding: 12px 20px; border-radius: 25px; border: 1px solid var(--blue1);
            background: var(--section-bg); color: var(--text-main); font-size: 1em;
            font-weight: 500; cursor: pointer; appearance: none; -webkit-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat; background-position: right 15px center;
        }

        .section {
            background: var(--section-bg); backdrop-filter: blur(10px); border-radius: 20px;
            padding: clamp(20px, 4vw, 40px); margin-bottom: 25px; box-shadow: var(--shadow);
            display: none; animation: fadeIn 0.5s ease-in-out;
            min-height: 75vh;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .section.active { display: block; }
        
        .section-header {
            color: var(--primary); font-size: clamp(1.4em, 4vw, 1.8em);
            margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid var(--secondary);
            display: flex; align-items: center; justify-content: space-between;
        }

        .download-section-btn {
            background: var(--blue2); color: var(--text-main); border: none;
            border-radius: 50%; width: 38px; height: 38px; display: flex;
            align-items: center; justify-content: center; font-size: 1.4em;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15); cursor: pointer;
            transition: background 0.2s, transform 0.2s; margin-left: auto; flex-shrink: 0;
        }
        .download-section-btn:hover { background: var(--blue1); transform: scale(1.08); }
        .download-section-btn.screenshot-hide { display: none !important; }

        .concept-card, .term-card {
            background: var(--blue3); border-left: 4px solid var(--primary); padding: 20px;
            margin: 20px 0; border-radius: 10px; transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        [data-theme="dark"] .concept-card, [data-theme="dark"] .term-card { background: var(--blue2); }
        .concept-card:hover, .term-card:hover { transform: translateX(5px); box-shadow: 0 6px 15px rgba(0,0,0,0.08); }
        
        .concept-title {
            font-weight: bold; color: var(--secondary); font-size: 1.2em; margin-bottom: 10px;
        }

        .threat-item {
            background: rgba(255, 107, 107, 0.1); padding: 15px; margin: 15px 0;
            border-radius: 10px; border-left: 4px solid #ff6b6b;
        }
        [data-theme="dark"] .threat-item { background: rgba(255, 107, 107, 0.2); }
        .example-item {
            background: rgba(0, 172, 193, 0.08); padding: 15px; margin-top: 15px;
            border-radius: 10px; border-left: 4px solid var(--accent);
        }
        [data-theme="dark"] .example-item { background: rgba(0, 172, 193, 0.15); }
        .highlight {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white;
            padding: 2px 8px; border-radius: 15px; font-weight: bold;
        }
        
        .table-wrapper {
            width: 100%;
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            -webkit-overflow-scrolling: touch;
        }
        .comparison-table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;
            background: var(--blue3);
        }
        .comparison-table th, .comparison-table td {
            padding: 15px; text-align: left; border-bottom: 1px solid var(--blue2);
        }
        [data-theme="dark"] .comparison-table th, [data-theme="dark"] .comparison-table td {
             border-bottom: 1px solid var(--blue1);
        }
        .comparison-table th { background: var(--nav-btn-bg); color: white; font-weight: 600; }
        
        .key-terms {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; margin: 20px 0;
        }
        .term-name {
            font-weight: bold; color: var(--primary); font-size: 1.1em; margin-bottom: 8px;
        }

        .section-image-container {
            width: 100%;
            max-width: 600px;
            margin: 25px auto;
            text-align: center;
        }
        #terms .section-image-container {
            max-width: 800px;
        }
        .section-image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: var(--shadow);
            background: var(--section-bg);
            padding: 10px;
        }

        .loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; color: var(--text-main); font-size: 1.5em;
            opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        [data-theme="dark"] .loading-screen { background: rgba(34, 47, 62, 0.8); }
        .loading-screen.show { opacity: 1; visibility: visible; }
        .loading-spinner {
            border: 8px solid rgba(0,0,0,0.1); border-top: 8px solid var(--primary);
            border-radius: 50%; width: 60px; height: 60px;
            animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        footer {
            text-align: center; padding: 10px; margin-top: 20px;
            color: var(--text-secondary); font-size: 0.9em; background: var(--footer-bg);
        }
        .footer-content { max-width: 1200px; margin: 0 auto; padding: 10px; text-align: center; }
        footer p { margin: 5px 0; color: var(--text-main); }
        .copyright-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary)); color: white;
            border: none; padding: 6px 12px; border-radius: 15px; font-size: 0.85em;
            cursor: pointer; transition: var(--transition); display: inline-flex;
            align-items: center; gap: 4px; margin: 3px 0;
        }
        .copyright-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); }
        .copyright-btn i { font-size: 1.1em; }
        
        .notification {
            position: fixed; bottom: 20px; left: -100%; background: var(--section-bg);
            padding: 20px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: calc(100% - 40px); max-width: 380px; z-index: 1000; transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .notification.show { left: 20px; }
        .notification-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;
        }
        .notification-title {
            font-weight: bold; color: var(--primary); font-size: 1.1em;
            display: flex; align-items: center; gap: 8px;
        }
        .notification-close {
            background: none; border: none; color: var(--text-secondary); cursor: pointer;
            font-size: 1.2em; padding: 5px; transition: var(--transition);
        }
        .notification-close:hover { color: var(--primary); transform: rotate(90deg); }
        .notification-content { color: var(--text-main); font-size: 0.9em; line-height: 1.6; }
        .notification-content p { margin: 8px 0; }
        .notification-content .disclaimer {
            font-style: italic; opacity: 0.8; font-size: 0.9em; margin-top: 10px;
        }

        @media (max-width: 768px) {
            .nav-buttons { display: none; }
            .nav-dropdown-container { display: block; }
            .navigation { padding: 10px; border-radius: 30px;}
        }

        @media (max-width: 480px) {
            .header {
                padding: 2.5rem 1rem;
            }
            .header h1 {
                font-size: 1.6em;
            }
            .download-buttons {
                flex-direction: column;
                align-items: center;
            }
            .download-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p class="loading-text">Processing...</p>
    </div>

    <div class="container">
        <div class="header">
            <div class="theme-toggle">
                <div class="toggle-switch" id="themeSwitch">
                    <div class="toggle-slider">
                        <span class="icon-sun"><i class="fas fa-sun"></i></span>
                        <span class="icon-moon"><i class="fas fa-moon"></i></span>
                    </div>
                </div>
            </div>
            <h1><i class="fas fa-shield-alt"></i> Data Security Learning Module</h1>
            <p>Basic concepts in Data Security</p>
            <p>Created By Eng. Eslam Osama</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="download-buttons">
                 <a href="assets/sheet1_intro.pdf" target="_blank" class="download-btn">
                    <i class="fas fa-file-pdf"></i> Download Original Sheet
                </a>
                <button class="download-btn" onclick="downloadFullPageZip()">
                    <i class="fas fa-images"></i> Download Sections as Images (ZIP)
                </button>
            </div>
        </div>

        <div class="navigation">
            <div class="nav-buttons">
                <button class="nav-btn active" data-section="basics"><i class="fas fa-book-open"></i> Basics</button>
                <button class="nav-btn" data-section="threats"><i class="fas fa-bug"></i> Threats</button>
                <button class="nav-btn" data-section="auth"><i class="fas fa-id-card"></i> Auth</button>
                <button class="nav-btn" data-section="attacks"><i class="fas fa-bolt"></i> Attacks</button>
                <button class="nav-btn" data-section="terms"><i class="fas fa-key"></i> Terms</button>
            </div>
            <div class="nav-dropdown-container">
                <select id="navDropdown" class="nav-dropdown">
                    <option value="basics">Basic Concepts</option>
                    <option value="threats">Security Threats</option>
                    <option value="auth">Authentication & Authorization</option>
                    <option value="attacks">Security Attacks</option>
                    <option value="terms">Important Terminologies</option>
                </select>
            </div>
        </div>

        <div class="section active" id="basics">
            <div class="section-header">
                <h2>1. Basic Concepts in Data Security</h2>
                <button class="download-section-btn" onclick="downloadSectionPng(this)"><i class="fas fa-download"></i></button>
            </div>
            <div class="section-image-container">
                <img src="media/image1.png" alt="CIA Triad Diagram" loading="lazy">
            </div>
            <div class="concept-card">
                <div class="concept-title">Data Security</div>
                <p>The practice of protecting digital information from unauthorized access, corruption, or modification.</p>
            </div>
            <div class="concept-card">
                <div class="concept-title">Confidentiality</div>
                <p>It refers to our ability to protect our data from those who are not authorized to view it and accessible only to authorized individuals.</p>
            </div>
            <div class="concept-card">
                <div class="concept-title">Integrity</div>
                <p>It refers to the ability to prevent our data from being changed in an unauthorized or undesirable manner during storage or transmission.</p>
                <div class="example-item"><strong>Example:</strong> Using hash functions to verify that a file has not been altered during transfer.</div>
            </div>
            <div class="concept-card">
                <div class="concept-title">Availability</div>
                <p>Ensuring that data and resources are accessible to authorized users when needed.</p>
                <div class="example-item"><strong>Example:</strong> A company regularly backs up its customer database to an offsite server. If the primary server fails, the backup ensures the data is still accessible.</div>
            </div>
        </div>

        <div class="section" id="threats">
            <div class="section-header">
                <h2>2. Security Threats</h2>
                <button class="download-section-btn" onclick="downloadSectionPng(this)"><i class="fas fa-download"></i></button>
            </div>
            <h3 style="color: var(--secondary); margin-bottom: 20px;">Threats to Confidentiality</h3>
            <div class="threat-item"><div class="concept-title">Hackers</div><p>Individuals who use technical skills to break into systems, exploit vulnerabilities, or steal data.</p><div class="example-item"><strong>Example:</strong> A hacker uses a brute-force attack to guess a weak password and gain access to a system.</div></div>
            <div class="threat-item"><div class="concept-title">Masqueraders</div><p>Individuals who pretend to be someone else (an authorized user) to gain access to systems or data.</p><div class="example-item"><strong>Example:</strong> Receiving a fake email that looks like it's from your bank, asking for your password.</div></div>
            <div class="threat-item"><div class="concept-title">Unauthorized Users</div><p>Individuals or entities who try to access systems, data, or resources without proper permission or authorization.</p><div class="example-item"><strong>Example:</strong> A <span class="highlight">student</span> tries to gain access to the <span class="highlight">academic portal</span> as an <span class="highlight">instructor</span> to change their grades.</div></div>
            <div class="threat-item"><div class="concept-title">Unprotected Downloads</div><p>Downloading files or software from the internet without proper security measures, such as encryption, verification, or scanning for malware.</p><div class="example-item"><strong>Example:</strong> Downloading a free game or software from an untrusted website without checking if it's safe.</div></div>
            <div class="threat-item"><div class="concept-title">Malware</div><p>Short for malicious software and is like any software, but intentionally designed to harm, exploit, or compromise systems, networks, or data.</p><div class="example-item"><strong>Example:</strong> A fake game app that steals your contacts and messages. (<span class="highlight">Trojans</span>)</div></div>

            <h3 style="color: var(--secondary); margin: 30px 0 20px;">Threats to Availability</h3>
            <div class="threat-item"><div class="concept-title">Human Factors (Intentional)</div><p>Deliberate actions by individuals to disrupt systems, data, or resources, making them unavailable.</p><div class="example-item"><strong>Example:</strong> A hacker sends millions of fake requests to an online store, causing the website to crash so legitimate customers can't shop. (<span class="highlight">Denial-of-Service (DoS) Attack</span>)</div></div>
            <div class="threat-item"><div class="concept-title">Human Factors (Unintentional)</div><p>Accidental actions by individuals that lead to systems, data, or resources becoming unavailable.</p><div class="example-item"><strong>Example:</strong> An employee accidentally spills coffee on a server, causing it to short-circuit and crash.</div></div>
            <div class="threat-item"><div class="concept-title">Non-Human Factors</div><p>Events or issues not caused by humans that disrupt systems, data, or resources, making them unavailable.</p><div class="example-item"><strong>Example:</strong> A natural disaster like a flood or earthquake damages a data center, taking down multiple websites and services.</div></div>
        </div>

        <div class="section" id="auth">
            <div class="section-header">
                <h2>3. Authentication & Authorization</h2>
                <button class="download-section-btn" onclick="downloadSectionPng(this)"><i class="fas fa-download"></i></button>
            </div>
            <div class="concept-card"><div class="concept-title">Authentication</div><p>The process of verifying the identity of a user, system, or device to ensure they are who they claim to be. Purpose is to prevent unauthorized access to system, data, or resources.</p><div class="example-item"><strong>Example:</strong> Logging into your email account with a username and password.</div></div>
            <h3 style="color: var(--secondary); margin: 30px 0 20px;">Common Authentication Techniques</h3>
            <div class="concept-card"><div class="concept-title">Password-Based Authentication</div><p>Users provide a username and password to prove their identity.</p><div class="example-item"><strong>Example:</strong> Logging into your Facebook account with your email and password.</div></div>
            <div class="concept-card"><div class="concept-title">Two-Factor Authentication (2FA)</div><p>Requires two forms of verification which are <span class="highlight">something you know</span> (password) and <span class="highlight">something you have</span> (a code sent to your phone).</p><div class="example-item"><strong>Example:</strong> Logging into your bank account with a password and a one-time code sent to your phone.</div></div>
            <div class="concept-card"><div class="concept-title">Biometric Authentication</div><p>Uses unique physical characteristics to verify identity, such as fingerprints, facial recognition, or voice patterns.</p><div class="example-item"><strong>Example:</strong> Unlocking your smartphone with your fingerprint or face.</div></div>
            <div class="concept-card"><div class="concept-title">Certificate-Based Authentication</div><p>An encrypted piece of data which contains information about its owner, issuer of certificate, and some other data.</p><div class="example-item"><strong>Example:</strong> Logging into a secure government website using a digital certificate stored on your computer.</div></div>
            <div class="concept-card"><div class="concept-title">Authorization</div><p>Granting or denying access to specific resources based on a user's identity and permissions.</p><div class="example-item"><strong>Example:</strong> On the academic portal, only instructors have the credentials and permissions to delete, add, or update files like lectures and sheets, while students can only view and download them. This ensures proper access control and security.</div></div>
            <div class="concept-card"><div class="concept-title">Accountability</div><p>Means making sure that people are responsible for their actions and can be identified if something goes wrong. It's about tracking who did what, so actions are traceable and answerable.</p></div>
        </div>

        <div class="section" id="attacks">
            <div class="section-header">
                <h2>4. Security Attacks</h2>
                <button class="download-section-btn" onclick="downloadSectionPng(this)"><i class="fas fa-download"></i></button>
            </div>
            <div class="concept-card">
                <div class="concept-title">Threat vs. Attack</div>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead><tr><th>Aspect</th><th>Threat</th><th>Attack</th></tr></thead>
                        <tbody>
                            <tr><td><strong>Definition</strong></td><td>A potential danger that could exploit a vulnerability in a system</td><td>The actual attempt to harm or exploit a system</td></tr>
                            <tr><td><strong>Nature</strong></td><td>Possibility of harm</td><td>Action of causing harm</td></tr>
                            <tr><td><strong>Example</strong></td><td>A hacker planning to steal data from a company's database</td><td>The hacker actually breaking into the database and stealing data</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <h3 style="color: var(--secondary); margin: 30px 0 20px;">Types of Security Attacks</h3>
            <div class="concept-card"><div class="concept-title">Passive Attack</div><p>The attacker observes or monitors the system but does not alter or disrupt it. The goal is usually to gather information without being detected.</p><div class="example-item"><strong>Examples:</strong><ul style="margin-top: 10px; padding-left: 20px;"><li><strong>Packet Sniffing:</strong> A hacker captures data packets being sent over a network (like passwords or emails) but doesn't interfere with the communication.</li><li><strong>Traffic Analysis:</strong> Traffic analysis involves studying the patterns of network traffic (e.g., who is communicating, when, how often, and how much data is being sent) without necessarily looking at the content of the packets.</li></ul><p style="margin-top: 15px;"><strong>Key Point:</strong> Passive attacks are hard to detect because they don't change the system.</p></div></div>
            <div class="concept-card"><div class="concept-title">Active Attack</div><p>The attacker <span class="highlight">interacts with or modifies</span> the system. The goal is to disrupt, alter, or damage the system or data.</p><div class="example-item"><strong>Examples:</strong><ul style="margin-top: 10px; padding-left: 20px;"><li><strong>Denial of Service (DoS):</strong> A hacker floods a website with traffic to crash it, making it unavailable to users.</li><li><strong>Man-in-the-Middle (MITM):</strong> A hacker intercepts and alters communication between two parties without their knowledge.</li></ul><p style="margin-top: 15px;"><strong>Key Point:</strong> Active attacks are easier to detect because they cause noticeable changes or disruptions.</p></div></div>
        </div>
        
        <div class="section" id="terms">
            <div class="section-header">
                <h2>5. Important Terminologies</h2>
                <button class="download-section-btn" onclick="downloadSectionPng(this)"><i class="fas fa-download"></i></button>
            </div>
            <div class="key-terms">
                <div class="term-card"><div class="term-name">Plaintext</div><p>The original, readable message or data before it is encrypted.</p></div>
                <div class="term-card"><div class="term-name">Ciphertext</div><p>The scrambled, unreadable version of the plaintext after encryption.</p></div>
                <div class="term-card"><div class="term-name">Key</div><p>A piece of information (like a code) used to encrypt or decrypt data.</p></div>
                <div class="term-card"><div class="term-name">Cipher</div><p>A method or algorithm used to encrypt plaintext into ciphertext or decrypt ciphertext back into plaintext.</p></div>
                <div class="term-card"><div class="term-name">Encryption</div><p>The process of converting plaintext into ciphertext to protect its confidentiality.</p></div>
                <div class="term-card"><div class="term-name">Decryption</div><p>The process of converting ciphertext back into plaintext so it can be read.</p></div>
                <div class="term-card"><div class="term-name">Symmetric Encryption</div><p>A type of encryption where the same key is used to encrypt and decrypt data.</p><div class="example-item" style="margin-top: 10px;"><strong>Example:</strong> The AES (Advanced Encryption Standard) cipher</div></div>
                <div class="term-card"><div class="term-name">Asymmetric Encryption</div><p>A type of encryption that uses two different keys: a public key to encrypt and a private key to decrypt.</p><div class="example-item" style="margin-top: 10px;"><strong>Example:</strong> The RSA (Rivest-Shamir-Adleman) cipher</div></div>
                <div class="term-card"><div class="term-name">Public Key</div><p>A key that is shared publicly and used to encrypt data.</p><div class="example-item" style="margin-top: 10px;"><strong>Example:</strong> If Alice wants to send Bob a secure message, she uses Bob's public key to encrypt it.</div></div>
                <div class="term-card"><div class="term-name">Private Key</div><p>A secret key that is kept private and used to decrypt data.</p><div class="example-item" style="margin-top: 10px;"><strong>Example:</strong> Only Bob has his private key, which he uses to decrypt the message Alice sent him.</div></div>
            </div>
            <div class="section-image-container" style="margin-top: 30px;">
                 <img src="media/image2.png" alt="Encryption process diagram" loading="lazy">
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>Data Security Learning Module - Basic concepts in Data Security | Designed for Educational Purposes | By Eng. Eslam Osama</p>
            <div class="copyright-notice">
                <button class="copyright-btn" onclick="showCopyrightNotice()">
                    <i class="fas fa-copyright"></i> Copyright Notice
                </button>
            </div>
        </div>
    </footer>

    <div class="notification" id="copyrightNotification">
        <div class="notification-header">
            <div class="notification-title">
                <i class="fas fa-shield-alt"></i> Copyright Notice
            </div>
            <button class="notification-close" onclick="hideCopyrightNotice()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="notification-content">
            <p>This content is protected by copyright law. Unauthorized copying, distribution, or use of this material is strictly prohibited. The code, design, and content of this educational module are the exclusive property of the creator. Any reproduction or distribution without express written permission is a violation of copyright law.</p>
            <p class="disclaimer">This module is provided for educational purposes only. The creator makes no warranties about the completeness, reliability, or accuracy of this information.</p>
        </div>
    </div>

    <script>
        // --- THEME TOGGLE ---
        const themeSwitch = document.getElementById('themeSwitch');
        const root = document.documentElement;
        function setTheme(mode) {
            if (mode === 'dark') {
                root.setAttribute('data-theme', 'dark');
                themeSwitch.classList.add('dark');
            } else {
                root.removeAttribute('data-theme');
                themeSwitch.classList.remove('dark');
            }
            localStorage.setItem('theme', mode);
        }
        themeSwitch.addEventListener('click', () => {
            const isDark = root.getAttribute('data-theme') === 'dark';
            setTheme(isDark ? 'light' : 'dark');
        });
        // Set initial theme on load
        (() => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                setTheme(savedTheme);
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setTheme('dark');
            }
        })();

        // --- NAVIGATION & PROGRESS BAR ---
        const sections = document.querySelectorAll('.section');
        const navButtons = document.querySelectorAll('.nav-btn');
        const navDropdown = document.getElementById('navDropdown');
        const progressBar = document.getElementById('progressBar');

        function updateProgressBar() {
            const activeSection = document.querySelector('.section.active');
            if (!activeSection) return;
            const sectionIndex = Array.from(sections).indexOf(activeSection);
            const progress = (sectionIndex / (sections.length - 1)) * 100;
            progressBar.style.width = progress + '%';
        }

        function showSection(sectionId) {
            sections.forEach(section => section.classList.remove('active'));
            const activeSection = document.getElementById(sectionId);
            if (activeSection) activeSection.classList.add('active');
            
            navButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.section === sectionId));
            if (navDropdown.value !== sectionId) navDropdown.value = sectionId;
            
            updateProgressBar();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        navButtons.forEach(btn => btn.addEventListener('click', () => showSection(btn.dataset.section)));
        navDropdown.addEventListener('change', () => showSection(navDropdown.value));

        // --- LOADING SCREEN ---
        const loadingScreen = document.getElementById('loadingScreen');
        function showLoading(message = 'Processing...') {
            if(loadingScreen) {
                loadingScreen.querySelector('.loading-text').textContent = message;
                loadingScreen.classList.add('show');
            }
        }
        function hideLoading() {
            if(loadingScreen) loadingScreen.classList.remove('show');
        }
        
        // --- Copyright Notice ---
        function showCopyrightNotice() {
            const notification = document.getElementById('copyrightNotification');
            notification.classList.add('show');
            setTimeout(() => {
                if (notification.classList.contains('show')) {
                    hideCopyrightNotice();
                }
            }, 5000); // Auto-hide after 5 seconds
        }
        function hideCopyrightNotice() {
            document.getElementById('copyrightNotification').classList.remove('show');
        }
        document.querySelector('.copyright-btn').addEventListener('click', (e) => {
            e.preventDefault();
            showCopyrightNotice();
        });
        document.querySelector('.notification-close').addEventListener('click', hideCopyrightNotice);
        setTimeout(showCopyrightNotice, 1500);

        // --- REVISED IMAGE CAPTURE LOGIC ---
        async function prepareForCanvas(section) {
            // Hide interactive elements
            document.querySelectorAll('.download-section-btn, .download-btn, .navigation').forEach(el => 
                el.classList.add('screenshot-hide')
            );

            // Force-load all images within the section
            const images = Array.from(section.querySelectorAll('img'));
            const imageLoadPromises = images.map(img => {
                if (img.complete && img.naturalWidth !== 0) return Promise.resolve();
                return new Promise((resolve, reject) => {
                    img.onload = resolve;
                    img.onerror = () => {
                        console.warn(`Could not load image: ${img.src}`);
                        resolve();
                    };
                });
            });

            // Wait for images to load
            await Promise.all(imageLoadPromises);

            // Wait for fonts to be ready
            if (document.fonts && document.fonts.ready) {
                try { await document.fonts.ready; } catch(e) {}
            }

            // Wait for CSS transitions/animations to finish
            await new Promise(r => setTimeout(r, 700));

            // Force multiple reflows to ensure rendering
            section.offsetHeight; 
            section.offsetHeight;
            
            // Final wait to ensure all styles are applied
            await new Promise(r => setTimeout(r, 200));
        }
        
        function cleanupAfterCanvas() {
            // Restore visibility of all previously hidden elements
            document.querySelectorAll('.screenshot-hide').forEach(el => 
                el.classList.remove('screenshot-hide')
            );
            document.body.offsetHeight;
        }

        async function downloadSectionPng(buttonEl) {
            const section = buttonEl.closest('.section');
            if (!section) return;

            showLoading('Preparing section image...');
            try {
                await prepareForCanvas(section);

                const theme = document.documentElement.getAttribute('data-theme');
                const solidBgColor = theme === 'dark' ? '#00323d' : '#ffffff';

                const canvas = await html2canvas(section, {
                    scale: 3, // High DPI for clarity
                    useCORS: true,
                    allowTaint: false,
                    imageTimeout: 0,
                    logging: false,
                    backgroundColor: solidBgColor,
                    onclone: (clonedDoc) => {
                        // Apply current theme to clone
                        if (theme) {
                            clonedDoc.documentElement.setAttribute('data-theme', theme);
                        }
                        
                        // Hide UI elements in clone
                        clonedDoc.querySelectorAll('.download-section-btn, .download-btn, .navigation').forEach(el => 
                            el.classList.add('screenshot-hide')
                        );
                        
                        // Override complex backgrounds with solid colors
                        const style = clonedDoc.createElement('style');
                        style.textContent = `
                            .section {
                                background: ${solidBgColor} !important;
                                backdrop-filter: none !important;
                            }
                            .header, .concept-card, .term-card, .threat-item, 
                            .example-item, .comparison-table {
                                background: ${solidBgColor} !important;
                                backdrop-filter: none !important;
                            }
                            [data-theme="dark"] .section,
                            [data-theme="dark"] .header,
                            [data-theme="dark"] .concept-card,
                            [data-theme="dark"] .term-card,
                            [data-theme="dark"] .threat-item,
                            [data-theme="dark"] .example-item {
                                background: #00323d !important;
                            }
                        `;
                        clonedDoc.head.appendChild(style);
                    }
                });

                const link = document.createElement('a');
                link.download = `${section.id}-section.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (err) {
                console.error("Failed to generate section image:", err);
                alert("Apologies, there was an error creating the high-quality image.");
            } finally {
                cleanupAfterCanvas();
                hideLoading();
            }
        }

        async function downloadFullPageZip() {
            showLoading('Creating ZIP file...');
            const zip = new JSZip();
            const sectionsToCapture = document.querySelectorAll('.section');
            const originalActiveSectionId = document.querySelector('.section.active')?.id;

            for (const section of sectionsToCapture) {
                try {
                    // Make section visible for capture
                    const wasActive = section.classList.contains('active');
                    if (!wasActive) {
                        sectionsToCapture.forEach(s => s.classList.remove('active'));
                        section.classList.add('active');
                    }

                    await prepareForCanvas(section);

                    const theme = document.documentElement.getAttribute('data-theme');
                    const solidBgColor = theme === 'dark' ? '#00323d' : '#ffffff';

                    const canvas = await html2canvas(section, {
                        scale: 3,
                        useCORS: true,
                        allowTaint: false,
                        imageTimeout: 0,
                        logging: false,
                        backgroundColor: solidBgColor,
                        onclone: (clonedDoc) => {
                            if (theme) {
                                clonedDoc.documentElement.setAttribute('data-theme', theme);
                            }
                            
                            clonedDoc.querySelectorAll('.download-section-btn, .download-btn, .navigation').forEach(el => 
                                el.classList.add('screenshot-hide')
                            );
                            
                            // Override complex backgrounds with solid colors
                            const style = clonedDoc.createElement('style');
                            style.textContent = `
                                .section {
                                    background: ${solidBgColor} !important;
                                    backdrop-filter: none !important;
                                }
                                .header, .concept-card, .term-card, .threat-item, 
                                .example-item, .comparison-table {
                                    background: ${solidBgColor} !important;
                                    backdrop-filter: none !important;
                                }
                                [data-theme="dark"] .section,
                                [data-theme="dark"] .header,
                                [data-theme="dark"] .concept-card,
                                [data-theme="dark"] .term-card,
                                [data-theme="dark"] .threat-item,
                                [data-theme="dark"] .example-item {
                                    background: #00323d !important;
                                }
                            `;
                            clonedDoc.head.appendChild(style);
                        }
                    });
                    
                    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                    zip.file(`${section.id}.png`, blob);

                    if (!wasActive) {
                        section.classList.remove('active');
                    }
                } catch (err) {
                    console.error(`Failed to capture section ${section.id}:`, err);
                }
            }

            try {
                // Restore original active section
                sectionsToCapture.forEach(s => s.classList.remove('active'));
                if(originalActiveSectionId) {
                    document.getElementById(originalActiveSectionId).classList.add('active');
                } else if (sectionsToCapture.length > 0) {
                    sectionsToCapture[0].classList.add('active');
                }

                const zipBlob = await zip.generateAsync({ type: 'blob' });
                saveAs(zipBlob, 'Data-Security-Sections.zip');
            } catch (err) {
                console.error("Failed to generate ZIP:", err);
                alert("Sorry, there was an error creating the ZIP file.");
            } finally {
                cleanupAfterCanvas();
                hideLoading();
            }
        }
        
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            showSection('basics');
        });
    </script>
</body>
</html>
